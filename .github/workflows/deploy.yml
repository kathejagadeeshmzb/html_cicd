Name: build docker image
on: 
  push:
    branches: 
      - main

jobs: 
  build:
    runs-on: ubuntu letest



    steps:
      - name: check out code
        uses: actions/checkout@v2


      - name: set up docker buildx
        uses: docker/setup-buildx-action@v2

      - name: login  to Docker hub
        uses: docker/login-action@v2
      
        with:
          username: ${{ secrets.DOCKER_USERNAME }}
          password: ${{ secrets. DOCKER_PASSWORD }}
      
      -name: set up docker tag
       id: docker_tag
       run: echo "TAG=$(date +%Y%m%d%H%M%S)-${GITHUB_s=SHA::7}">> $GITHUB_ENV

      - name: build docker image
        run: |
          docker build -t kathejagadeeshmzb/my-app:${{ env.TAG }} .
      
      - name: push docker image
        run: docker push kathejagadeeshmzb/my-app:${{ env.TAG }}

